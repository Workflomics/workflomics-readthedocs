Local Benchmarking Setup
========================

This documentation provides instructions for setting up your local environment to benchmark workflows generated by the Workflomics web platform. The setup involves installing Python, setting up a virtual environment, installing the Workflomics benchmarker, supporting containerization, and finally running the workflows.

Windows
-------

On Windows, use the `Windows Subsystem for Linux <https://learn.microsoft.com/en-us/windows/wsl/install>`_ (WSL) to set up a Linux environment for running the Workflomics benchmarker,
and follow the instructions below from withing WSL.

Installing Python
-----------------

Follow these steps to install Python:

1. Download the latest version of Python from the official website:

   - `Python Downloads <https://www.python.org/downloads/>`_

2. Follow the installation instructions for your operating system. Make sure to add Python to your systemâ€™s path.

Setting Up a Virtual Environment
--------------------------------

After installing Python, proceed to set up a virtual environment for project dependencies:

1. Create a virtual environment:

   .. code-block:: bash

      python3 -m venv workflomics-env

2. Activate the virtual environment:

   .. code-block:: bash

      source workflomics-env/bin/activate

Installing Workflomics Benchmarker
----------------------------------

With the virtual environment activated, you can now install the Workflomics benchmarker:

1. Install `workflomics-benchmarker` using pip:

   .. code-block:: bash

      pip install workflomics-benchmarker

Supporting Containerization
---------------------------

Workflows generated by Workflomics are containerized. Depending on your preference, install Docker or Singularity/Apptainer.

### Installing Docker

Docker supports containerized environments:

1. Download Docker Desktop from the official website:

   - `Docker Downloads <https://www.docker.com/products/docker-desktop>`_

2. Install Docker Desktop by following the installation guide for your OS and verify the installation:

   .. code-block:: bash

      docker --version

### Installing Singularity/Apptainer

Alternatively, use Singularity (now Apptainer) for containerization:

1. Follow the installation guide on the official Apptainer documentation:

   - `Apptainer Installation Guide <https://apptainer.org/docs/user/main/quick_start.html#installation>`_

2. Verify the installation:

   .. code-block:: bash

      singularity version  # or `apptainer version` based on your installation

Running Workflows
-----------------

To run the Workflomics workflows:

1. Download workflows that were generated on the Workflomics website (using the "Download selected" button), and unzip them.

2. Navigate to the folder containing the unzipped workflows.

3. Execute the benchmark command in the terminal. To benchmark in the current directory:

   .. code-block:: bash

      workflomics benchmark .

   Or to benchmark in a different directory:

   .. code-block:: bash

      workflomics benchmark path-to-dir

.. note:: Replace `path-to-dir` with the actual path to the directory containing your Workflomics workflows.

Visualizing Benchmark Results
-----------------------------

After benchmarking, upload your results to the Workflomics platform for interactive visualization:

1. Navigate to the Workflomics Benchmark Upload Page:

   - `Workflomics Benchmarks Upload <http://145.38.190.48/benchmarks>`_

2. Upload your `workflow-benchmarks.json` file by following the on-screen instructions.

3. Access interactive visualizations to explore the benchmark results comprehensively.

.. note:: Please ensure that any data you upload is free of sensitive or proprietary information, as it will be accessible to other users for analysis and comparison purposes.
